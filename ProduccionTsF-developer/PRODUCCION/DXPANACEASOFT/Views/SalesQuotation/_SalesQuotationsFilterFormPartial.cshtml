@using DXPANACEASOFT.DataProviders
@model DXPANACEASOFT.Models.SalesQuotation

@using (Html.BeginForm("", "", FormMethod.Post, new { @id= "formFilterSalesQuotation", name = "formFilterSalesQuotation" }))
{
<table class="table table-condenced" style="border: 0px solid #ffffff; margin-bottom: 0px;">
    <tr>
        <td style="width: 20%">
            <table class="table table-condensed">
                <tr style="border-bottom: 1px solid #c0c0c0">
                    <td colspan="2">
                        <span class="dxflGroupBoxCaption_Metropolis" style="left: 0px; padding-left: 0px; top: 0px">Documento</span>
                    </td>
                </tr>
                <tr>
                    <td>
                        @Html.DevExpress().LabelFor(m => m.Document.id_documentState, settings =>
                        {
                            settings.Name = "documentStatelabel";
                            settings.Text = "Estado:";
                            settings.AssociatedControlName = "id_documentState";
                        }).GetHtml()
                    </td>
                    @{
                        var id_documentType = Model.Document.DocumentType == null ? (int?)null : Model.Document.DocumentType.id;
                    }
                    <td>
                        @Html.DevExpress().ComboBox(settings =>
                        {
                            settings.Name = "id_documentState";
                            settings.Properties.ClientInstanceName = "id_documentState";
                            settings.Width = Unit.Percentage(100);
                            settings.Properties.ValueField = "id";
                            settings.Properties.TextField = "name";

                            settings.Properties.NullDisplayText = "Todos";
                            settings.Properties.NullText = "Todos";
                            settings.Properties.ValueType = typeof(int);
                            settings.Width = Unit.Percentage(100);
                            
                            settings.Properties.DropDownStyle = DropDownStyle.DropDownList;
                            settings.Properties.ClearButton.DisplayMode = ClearButtonDisplayMode.OnHover;
                            settings.Properties.EnableSynchronization = DefaultBoolean.False;
                            settings.Properties.IncrementalFilteringMode = IncrementalFilteringMode.Contains;

                        }).BindList(DataProviderDocumentState.DocumentStatesByDocumentType(id_documentType, (int?)ViewData["id_company"])).GetHtml()
                    </td>
                </tr>
                <tr>
                    <td>
                        @Html.DevExpress().LabelFor(m => m.Document.number, settings =>
                        {
                            settings.Name = "numberLabel";
                            settings.Text = "No.:";
                            settings.AssociatedControlName = "number";
                        }).GetHtml()
                    </td>
                    <td>
                        @Html.DevExpress().TextBoxFor(m => m.Document.number, settings =>
                        {
                            settings.Name = "number";
                            settings.Properties.ClientInstanceName = "number";
                            settings.Width = Unit.Percentage(100);
                            settings.Properties.NullDisplayText = "Todos";
                            settings.Properties.NullText = "Todos";

                        }).GetHtml()
                    </td>
                </tr>
                <tr>
                    <td>
                        @Html.DevExpress().LabelFor(m => m.Document.reference, settings =>
                        {
                            settings.Name = "referenceLabel";
                            settings.Text = "Referencia:";
                            settings.AssociatedControlName = "reference";

                        }).GetHtml()
                    </td>
                    <td>
                        @Html.DevExpress().TextBoxFor(m => m.Document.reference, settings =>
                        {
                            settings.Name = "reference";
                            settings.Properties.ClientInstanceName = "reference";
                            settings.Width = Unit.Percentage(100);
                            settings.Properties.NullDisplayText = "Todos";
                            settings.Properties.NullText = "Todos";

                        }).GetHtml()
                    </td>
                </tr>
            </table>
        </td>
        <td style="width: 45%">
            <table class="table table-condensed" style="padding-top: 0px; margin-top: 0px">
                <tr style="border-bottom: 1px solid #c0c0c0">
                    <td colspan="4">
                        <span class="dxflGroupBoxCaption_Metropolis" style="left: 0px; padding-left: 0px; top: 0px">Emisi&oacute;n y Autorizaci&oacute;n</span>
                    </td>
                </tr>
                <tr>
                    <td style="width: 30%">
                        @Html.DevExpress().LabelFor(m => m.Document.emissionDate, settings =>
                            {
                                settings.Name = "startEmissionDateLabel";
                                settings.Text = "Fecha Emisión:";
                                settings.AssociatedControlName = "startEmissionDate";
                            }).GetHtml()
                    </td>
                    <td>
                        @Html.DevExpress().DateEditFor(m => m.Document.emissionDate, settings =>
                       {
                           settings.Name = "startEmissionDate";
                           settings.Properties.ClientInstanceName = "startEmissionDate";
                           settings.Width = Unit.Percentage(100);

                           settings.Properties.NullDisplayText = "Desde";
                           settings.Properties.NullText = "Desde";

                           settings.Properties.DisplayFormatInEditMode = true;
                           settings.Properties.DisplayFormatString = "dd/MM/yyyy";
                           settings.Properties.EditFormat = EditFormat.Custom;
                           settings.Properties.EditFormatString = "dd/MM/yyyy";

                           settings.Properties.ClientSideEvents.Validation = "OnRangeEmissionDateValidation";

                       }).GetHtml()
                    </td>
                    <td>
                        @Html.DevExpress().DateEditFor(m => m.Document.emissionDate, settings =>
                       {
                           settings.Name = "endEmissionDate";
                           settings.Properties.ClientInstanceName = "endEmissionDate";
                           settings.Width = Unit.Percentage(100);

                           settings.Properties.NullDisplayText = "Hasta";
                           settings.Properties.NullText = "Hasta";

                           settings.Properties.DisplayFormatInEditMode = true;
                           settings.Properties.DisplayFormatString = "dd/MM/yyyy";
                           settings.Properties.EditFormat = EditFormat.Custom;
                           settings.Properties.EditFormatString = "dd/MM/yyyy";

                           settings.Properties.ClientSideEvents.Validation = "OnRangeEmissionDateValidation";

                       }).GetHtml()
                    </td>
                </tr>
                <tr>
                    <td style="width: 30%">
                        @Html.DevExpress().LabelFor(m => m.Document.authorizationDate, settings =>
                            {
                                settings.Name = "startAuthorizationDateLabel";
                                settings.Text = "Fecha Autorización:";
                                settings.AssociatedControlName = "startAuthorizationDate";
                            }).GetHtml()
                    </td>
                    <td>
                        @Html.DevExpress().DateEditFor(m => m.Document.authorizationDate, settings =>
                       {
                           settings.Name = "startAuthorizationDate";
                           settings.Properties.ClientInstanceName = "startAuthorizationDate";
                           settings.Width = Unit.Percentage(100);

                           settings.Properties.NullDisplayText = "Desde";
                           settings.Properties.NullText = "Desde";

                           settings.Properties.DisplayFormatInEditMode = true;
                           settings.Properties.DisplayFormatString = "dd/MM/yyyy";
                           settings.Properties.EditFormat = EditFormat.Custom;
                           settings.Properties.EditFormatString = "dd/MM/yyyy";

                           settings.Properties.ClientSideEvents.Validation = "OnRangeAutorizationDateValidation";

                       }).GetHtml()
                    </td>
                    <td>
                        @Html.DevExpress().DateEditFor(m => m.Document.authorizationDate, settings =>
                       {
                           settings.Name = "endAuthorizationDate";
                           settings.Properties.ClientInstanceName = "endAuthorizationDate";
                           settings.Width = Unit.Percentage(100);

                           settings.Properties.NullDisplayText = "Hasta";
                           settings.Properties.NullText = "Hasta";

                           settings.Properties.DisplayFormatInEditMode = true;
                           settings.Properties.DisplayFormatString = "dd/MM/yyyy";
                           settings.Properties.EditFormat = EditFormat.Custom;
                           settings.Properties.EditFormatString = "dd/MM/yyyy";

                           settings.Properties.ClientSideEvents.Validation = "OnRangeAutorizationDateValidation";

                       }).GetHtml()
                    </td>
                </tr>
                <tr>
                    <td>
                        @Html.DevExpress().LabelFor(m => m.Document.accessKey, settings =>
                        {
                            settings.Name = "accsessKeyLabel";
                            settings.Text = "Clave de Acceso:";
                            settings.AssociatedControlName = "accessKey";
                        }).GetHtml()
                    </td>
                    <td colspan="2">
                        @Html.DevExpress().TextBoxFor(m => m.Document.accessKey, settings =>
                        {
                            settings.Name = "accessKey";
                            settings.Properties.ClientInstanceName = "accessKey";
                            settings.Width = Unit.Percentage(100);
                            settings.Properties.NullDisplayText = "Todos";
                            settings.Properties.NullText = "Todos";
                        }).GetHtml()
                    </td>
                </tr>
                <tr>
                    <td>
                        @Html.DevExpress().LabelFor(m => m.Document.authorizationNumber, settings =>
                        {
                            settings.Name = "autorizationNumberLabel";
                            settings.Text = "No. Autorización:";
                            settings.AssociatedControlName = "authorizationNumber";
                        }).GetHtml()
                    </td>
                    <td colspan="2">
                        @Html.DevExpress().TextBoxFor(m => m.Document.authorizationNumber, settings =>
                        {
                            settings.Name = "authorizationNumber";
                            settings.Properties.ClientInstanceName = "authorizationNumber";
                            settings.Width = Unit.Percentage(100);
                            settings.Properties.NullDisplayText = "Todas";
                            settings.Properties.NullText = "Todas";
                        }).GetHtml()
                    </td>
                </tr>
            </table>
        </td>
        <td style="width: 25%">
            <table class="table table-condensed">
                <tr style="border-bottom: 1px Solid #C0C0C0;">
                    <td colspan="2">
                        <span class="dxflGroupBoxCaption_Metropolis" style="left: 0px; padding-left: 0px; top: 0px;">Cotizaci&oacute;n</span>
                    </td>
                </tr>
                <tr>
                    <td style="width: 25%">
                        @Html.DevExpress().Label(settings =>
                        {
                            settings.Name = "customerLabel";
                            settings.Text = "Cliente:";
                            settings.AssociatedControlName = "id_customer";
                        }).GetHtml()
                    </td>
                    <td>
                        @Html.DevExpress().ComboBox(settings =>
                        {
                            settings.Name = "id_customer";
                            settings.Properties.ClientInstanceName = "id_customer";
                            settings.Width = Unit.Percentage(100);

                            settings.Properties.ValueField = "id";
                            settings.Properties.TextField = "fullname_businessName";
                            settings.Properties.ValueType = typeof(int);
                            //settings.Properties.Width = Unit.Percentage(100);

                            settings.Properties.NullDisplayText = "Todos";
                            settings.Properties.NullText = "Todos";
                            
                            settings.Properties.DropDownStyle = DropDownStyle.DropDownList;
                            settings.Properties.ClearButton.DisplayMode = ClearButtonDisplayMode.OnHover;
                            settings.Properties.EnableSynchronization = DefaultBoolean.False;
                            settings.Properties.IncrementalFilteringMode = IncrementalFilteringMode.Contains;
                            
                        }).BindList(DataProviderPerson.Customers()).GetHtml()
                    </td>
                </tr>
                <tr>
                    <td>
                        @Html.DevExpress().LabelFor(m => m.id_employeeSeller, settings =>
                        {
                            settings.Name = "employeeSellerLabel";
                            settings.Text = "Solicitante:";
                            settings.AssociatedControlName = "id_employeeSeller";
                        }).GetHtml()
                    </td>
                    <td>
                        @Html.DevExpress().ComboBox(settings =>
                   {
                       settings.Name = "id_employeeSeller";
                       settings.Properties.ClientInstanceName = "id_employeeSeller";
                       settings.Width = Unit.Percentage(100);

                       settings.Properties.ValueField = "id";
                       settings.Properties.TextField = "fullname_businessName";
                       settings.Properties.ValueType = typeof(int);
                       settings.Width = Unit.Percentage(100);

                       settings.Properties.NullDisplayText = "Todos";
                       settings.Properties.NullText = "Todos";

                       settings.Properties.DropDownStyle = DropDownStyle.DropDownList;
                       settings.Properties.ClearButton.DisplayMode = ClearButtonDisplayMode.OnHover;
                       settings.Properties.EnableSynchronization = DefaultBoolean.False;
                       settings.Properties.IncrementalFilteringMode = IncrementalFilteringMode.Contains;

                   }).BindList(DataProviderPerson.RolsByCompany((int?)ViewData["id_company"], "Solicitante")).GetHtml()
                    </td>
                </tr>
                <tr>
                    <td>
                        @Html.DevExpress().Label(settings =>
                        {
                            settings.Name = "itemLabel";
                            settings.Text = "Producto:";
                            settings.AssociatedControlName = "item";
                        }).GetHtml()
                    </td>
                    <td>
                        @Html.DevExpress().TokenBox(settings =>
                        {
                            settings.Name = "items";
                            settings.Properties.ClientInstanceName = "items";
                            settings.Width = Unit.Percentage(100);
                            settings.Properties.NullDisplayText = "Todos";
                            settings.Properties.NullText = "Todos";
                            settings.Properties.ValueField = "id";
                            settings.Properties.TextField = "name";
                        }).BindList(DataProviderItem.ItemsByCompanyAndInventoryLine((int?)ViewData["id_company"], "PT")).GetHtml()
                    </td>
                </tr>
            </table>
        </td>
        <td>
            <table class="table table-condensed">
                <tr style="border-bottom: 1px Solid #C0C0C0">
                    <td>
                        <span class="dxflGroupBoxCaption_Metropolis" style="left: 0px; padding-left: 0px; top: 0px;">Acciones</span>
                    </td>
                </tr>
                <tr>
                    <td>
                        @Html.DevExpress().Button(settings =>
                        {
                            settings.Name = "Search";
                            settings.UseSubmitBehavior = false;
                            settings.Text = "Buscar";
                            settings.ToolTip = "Buscar";
                            settings.Images.Image.IconID = IconID.ActionsSearch16x16devav;
                            settings.Width = Unit.Percentage(100);
                            settings.ClientSideEvents.Click = "btnSearch_click";
                        }).GetHtml()
                    </td>
                </tr>
                <tr>
                    <td>
                        @Html.DevExpress().Button(settings =>
                        {
                            settings.Name = "Clear";
                            settings.UseSubmitBehavior = false;
                            settings.Text = "Limpiar";
                            settings.ToolTip = "Limpiar";
                            settings.Images.Image.IconID = IconID.ActionsClear16x16;
                            settings.Width = Unit.Percentage(100);
                            settings.ClientSideEvents.Click = "btnClear_click";

                        }).GetHtml()
                    </td>
                </tr>
                <tr>
                    <td>
                        @Html.DevExpress().Button(settings =>
                        {
                            settings.Name = "AddNew";
                            settings.UseSubmitBehavior = false;
                            settings.Text = "Nuevo";
                            settings.ToolTip = "Nuevo";
                            settings.Images.Image.IconID = IconID.ActionsAdd16x16;
                            settings.Width = Unit.Percentage(100);
                            settings.ClientSideEvents.Click = "AddNewSalesQuotation";
                        }).GetHtml()
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
}



